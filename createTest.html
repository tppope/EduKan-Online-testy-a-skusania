<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <title>Koncept</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="concept/js/index.js"></script>

</head>
<body>

<div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true" style="position: absolute;top: 35%">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="modalLabel">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true" >&times;</span>
            </button>
        </div>
        <div>
            <input type="text" id="meno-testu" placeholder="Meno testu">
            <input type="range" max="120" min="45" id="cas">
        </div>
        <div class="modal-body" id="modal-body" style="display: flex">
            <button class='selectQ' onclick="createQuestion(1,qNum++)">Otazka na dopisovanie</button>
            <button class='selectQ' onclick="createQuestion(2,qNum++)" disabled>Otazka na spajanie</button>
            <button class='selectQ' onclick="createQuestion(3,qNum++)" >Otazka na moznosti</button>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary"  data-dismiss="modal">Close</button>
        </div>
    </div>
</div>
</div>
<div class="card" id="main" style="position: absolute;top: 10%;left: 25%;justify-items: center; width: 50%;height:50rem;margin: auto">
    <button class="btn-dark" style="position: relative;left:45%;top:15%;width: 5rem" data-toggle="modal" data-target="#modal">create</button>
    <div id="test" style="margin: auto">

    </div>


</div>
<button id="send" style="margin: auto">send</button>
<script>
//odosielanie

document.getElementById('send').onclick=function (){
    let test={};
    test.nazov=document.getElementById('meno-testu').value;
    test.casovy_limit=document.getElementById('cas').value;
    test.aktivny=true;
    let otazky= {};
    const q=document.getElementsByClassName('question');

    for(let i=0;i<q.length;i++){
        let q1Id=q[i].id;
        otazky[i+1]={}
        if(q[i].classList.contains("type-1")){
            otazky[i+1].typ=1;
        }
        if(q[i].classList.contains("type-2")){
            otazky[i+1].typ=2;
        }
        if(q[i].classList.contains("type-3")){
            otazky[i+1].typ=3;
        }
        otazky[i+1].nazov=q[i].value;
        const qOpt=document.getElementsByClassName(q1Id+"-option");
        if(q[i].classList.contains("type-1")===true) {

            let spravne_odpovede = [];
            for (let j = 0; j < qOpt.length; j++) {
                spravne_odpovede[j] = qOpt[j].value;
            }

            otazky[i + 1].spravne_odpovede = spravne_odpovede;
        }
        else if(q[i].classList.contains("type-3")===true) {
            let odpovede=[];
            for (let j = 0; j < qOpt.length; j++) {
                let spravnost=false;
                if(qOpt[j].parentElement.classList.contains('spravna')===true){
                    spravnost=true;
                }
                odpovede[j] = {text: qOpt[j].value , je_spravna: spravnost};
            }
            otazky[i + 1].odpovede = odpovede;
            otazky[i + 1].vie_student_pocet_spravnych=false;
        }
    }
    test.otazky=otazky
    console.log(JSON.stringify(test));
}

</script>
</body>
</html>