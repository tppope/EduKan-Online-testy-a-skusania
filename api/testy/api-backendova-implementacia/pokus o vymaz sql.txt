SET autocommit = 0;

SET @novy_test_id = 3;


LOCK TABLES test_3_otazky WRITE;


SET @c1 = 0;
SET @c2 = 0;
SET @c3 = 0;
SET @pocet_skutocny = 0;


SET @select_1 = CONCAT('SELECT COUNT(DISTINCT otazka_id) INTO @c1 FROM test_', @novy_test_id, '_otazky_typ_1;');
SET @select_2 = CONCAT('SELECT COUNT(DISTINCT otazka_id) INTO @c2 FROM test_', @novy_test_id, '_otazky_typ_2;');
SET @select_3 = CONCAT('SELECT COUNT(DISTINCT otazka_id) INTO @c3 FROM test_', @novy_test_id, '_otazky_typ_3;');
SET @select_pocet_skutocny = CONCAT('SELECT COUNT(id) INTO @pocet_skutocny FROM test_', @novy_test_id, '_otazky;');

PREPARE s1 FROM @select_1;
PREPARE s2 FROM @select_2;
PREPARE s3 FROM @select_3;
PREPARE s_pocet_skutocny FROM @select_pocet_skutocny;

EXECUTE s1;
EXECUTE s2;
EXECUTE s3;
EXECUTE s_pocet_skutocny;


SET @pocet_zisteny = @c1 + @c2 + @c3;


SELECT ( @pocet_zisteny = @pocet_skutocny ) AS check_result;



COMMIT;
UNLOCK TABLES;